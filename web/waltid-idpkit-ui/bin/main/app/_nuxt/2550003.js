(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{857:function(e,t,n){"use strict";n.r(t);var r=n(33),o=(n(91),n(38),n(1),n(840)),c=n.n(o),l={name:"ShareCredential",asyncData:function(e){return Object(r.a)(regeneratorRuntime.mark((function t(){var n,o,c,l,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.$axios,!(o=e.route).query.state&&!o.params.state){t.next=16;break}return c=o.query.state?o.query.state:o.params.state,console.log("Using state: "+c),t.next=6,n.$get("/api/openIdRequestUri?state="+c);case 6:if(!(l=t.sent)){t.next=13;break}return d=setInterval(Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/verifier-api/verify/isVerified?state="+l.requestId);case 2:if(200!==(t=e.sent).status){e.next=8;break}return window.clearTimeout(d),e.next=7,t.text();case 7:window.location=e.sent;case 8:case"end":return e.stop()}}),e)}))),1e3),console.log(l),t.abrupt("return",{requestInfo:l});case 13:return t.abrupt("return",null);case 14:t.next=18;break;case 16:return console.log("No state in params!"),t.abrupt("return",null);case 18:case"end":return t.stop()}}),t)})))()},mounted:function(){this.requestInfo&&this.requestInfo.url&&new c.a({element:document.getElementById("qr-code"),value:this.requestInfo.url,size:300})},methods:{redirectToWebWallet:function(){var e=this.requestInfo.url,t="http://localhost:8081/api/siop/initiatePresentation/?"+e.substring(e.indexOf("?"),e.length-1);console.log("Full url: "+t),window.location=t},redirectBack:function(){window.history.back()}}},d=n(68),component=Object(d.a)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"d-flex justify-content-center text-white vh-100 vw-100"},[t("div",{staticClass:"my-auto"},[e._m(0),e._v(" "),t("div",{staticClass:"text-center"},[e.requestInfo&&e.requestInfo.requestId?t("a",{staticClass:"btn btn-success",on:{click:e.redirectToWebWallet}},[e._v("Click\n                to login with Web Wallet")]):t("a",{staticClass:"btn btn-danger",on:{click:e.redirectBack}},[e._v("Return to\n            previous page")])]),e._v(" "),t("hr"),e._v(" "),t("div",[e.requestInfo&&e.requestInfo.requestId?t("div",{staticClass:"text-center"},[t("h2",[e._v("Or scan this code with your mobile identity wallet:")])]):t("div",[t("h2",[e._v("Invalid request (Timed out or doesn't exist).")])]),e._v(" "),t("div",{staticClass:"text-center"},[t("canvas",{attrs:{id:"qr-code"}})]),e._v(" "),e.requestInfo&&e.requestInfo.requestId&&e.requestInfo.url?t("div",{staticClass:"text-center small"},[e._v("\n                Request ID: "+e._s(e.requestInfo.requestId)+"\n                "),t("pre",[t("code",[e._v(e._s(e.requestInfo.url))])])]):e._e()])])])}),[function(){var e=this._self._c;return e("div",{staticClass:"text-center"},[e("div",{staticClass:"text-white h1"},[this._v("walt.id IDP Kit")])])}],!1,null,null,null);t.default=component.exports}}]);